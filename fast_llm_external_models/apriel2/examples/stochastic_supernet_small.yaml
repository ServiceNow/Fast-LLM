# Example: Small stochastic supernet for testing (3 layers)
#
# Same as stochastic_supernet.yaml but with only 3 blocks for fast testing.
#
# Usage:
#   python convert.py ServiceNow-AI/Apriel-1.5-15b-Thinker output/ \
#       --surgery examples/stochastic_supernet_small.yaml

decoder:
  type: fixed
  num_blocks: 3
  block:
    mixer:
      type: stochastic
      main_mixer_name: attention
      sampling_strategy: uniform
      mixers:
        # Main attention mixer - inherits config and weights from source
        attention:
          type: attention
          init: transfer

        # Sliding window - same architecture with window size override
        sliding_window:
          type: attention
          init: transfer
          sliding_window: 4096

        # Gated delta net - DIL initialization maps Q/K/V/O -> GDN projections
        gdn:
          type: gdn
          init: transfer
          conv_kernel_size: 4

    # MLP and normalization transfer from source
    mlp:
      init: transfer

    normalization:
      init: transfer
